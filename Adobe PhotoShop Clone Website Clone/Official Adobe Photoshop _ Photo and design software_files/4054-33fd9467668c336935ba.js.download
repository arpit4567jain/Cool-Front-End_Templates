(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4054],{14834:function(e,t,n){"use strict";n.d(t,{s:function(){return s}});var r=n(67294),o=n(12398),a=n(4285),i=n(37629),u=n(13164),l=n(5764),c=r.createElement,s=function(e){var t=e.backLabel,n=e.ctaLabel,s=e.disableCtaButton,d=void 0!==s&&s,f=e.onBackClick,m=e.onCtaClick,p=e.showBackButton,g=e.children,v=(0,l.R_)().loading,C=(0,r.useState)(!1),h=C[0],y=C[1];(0,r.useEffect)((function(){!v&&h&&y(!1)}),[v,h]);var T=(0,u.T)(),S=function(e){switch(e){case"btnNameCta":T(i.P.ACTION_CONTAINER_BUTTON_CLICK),y(!0),m();break;case"btnNameBack":T(i.P.ACTION_CONTAINER_BACK_CLICK),f()}};return c("div",{className:a.Z.actionContainer,"data-testid":"action-container"},c(o.default,{variant:"cta",disabled:d||h,onClick:function(){return S("btnNameCta")},"data-testid":"action-container-cta"},g&&c("span",{className:a.Z.ctaIcon},g),n),p&&c(o.default,{quiet:!0,variant:"secondary",disabled:h,onClick:function(){return S("btnNameBack")},"data-testid":"action-container-back-button"},t))}},30137:function(e,t,n){"use strict";n.d(t,{b:function(){return S},t:function(){return ue}});var r=n(67294),o=n(12398),a=n(93101),i=n(69429),u=n(298),l=n(65455),c=n(49313),s=n(34937),d=(0,s.defineContents)("externalworkflowpage",{headerDefault:{id:"headerDefault",type:"string",placeholderContent:"If you've made your purchase, get started now. (PH)"},messageDefault:{id:"messageDefault",type:"string",placeholderContent:"Please complete the purchase in your web browser. If you would like to purchase later, you can cancel now. (PH)"},cancelButtonDefault:{id:"cancelButtonDefault",type:"string",placeholderContent:"Cancel (PH)"},continueButtonDefault:{id:"continueButtonDefault",type:"string",placeholderContent:"Get Started (PH)"},headerChangePlan:{id:"headerChangePlan",type:"string",placeholderContent:"Switch your plan in your Adobe Account. (PH)"},messageChangePlan:{id:"messageChangePlan",type:"string",placeholderContent:"Once you are done, come back here and click Continue to proceed. If you would like to continue later, you can cancel for now. (PH)"},cancelButtonChangePlan:{id:"cancelButtonChangePlan",type:"string",placeholderContent:"Cancel (PH)"},continueButtonChangePlan:{id:"continueButtonChangePlan",type:"string",placeholderContent:"Continue (PH)"}}),f=n(8703),m=n(66537),p=n(52253),g=n(11051),v=n(12510),C=n(52007),h=n(3971),y=n(2037),T=r.createElement,S=(0,h.withAEMContent)("checkout/external",d.__contentType,d)((function(e){var t=e.workflow,n=(0,s.useContentEntry)(d),h=(0,g.useCommerceAppContext)().emitMessage,S=(0,C.useTrackEvent)();(0,r.useEffect)((function(){var e=(0,u.W6)("".concat(t).concat(p.ps.COMPLETE_PURCHASE_WEB,":").concat(p.ps.MODAL),"".concat(p.ps.COMPLETE_PURCHASE_WEB));S(e)}),[S,t]);var E=function(e){switch(e){case f.q.CHANGE_PLAN:return{header:n.get(d.headerChangePlan),message:n.get(d.messageChangePlan),cancelButton:n.get(d.cancelButtonChangePlan),continueButton:n.get(d.continueButtonChangePlan)};default:return{header:n.get(d.headerDefault),message:n.get(d.messageDefault),cancelButton:n.get(d.cancelButtonDefault),continueButton:n.get(d.continueButtonDefault)}}}(t),I=E.header,A=E.message,P=E.cancelButton,_=E.continueButton,b=(0,v.useStore)(),U=(0,l.jz)(b.getState());return T("div",{className:i.Z.container},!U&&T("div",{className:i.Z.closeContainer},T(o.default,{variant:"action",quiet:!0,onClick:function(){h(g.SystemMessage.CLOSE)},icon:T(a.default,{size:"L"}),"data-testid":"closeButton"})),T("div",{className:i.Z.center},T(m.InfoLight,{size:"L","data-testid":"externalWorkflowIcon"}),T(c.X6,null,I),T("p",{className:i.Z.message},A),T("div",{className:i.Z.buttonContainer},T(o.default,{variant:"secondary","data-testid":"externalWorkflowCancelButton",onClick:function(){var e=(0,u.W6)("".concat(t).concat(p.ps.COMPLETE_PURCHASE_WEB,":").concat(p.ps.CANCEL),"".concat(p.ps.COMPLETE_PURCHASE_WEB).concat(p.ps.CANCEL));S(e),h(g.SystemMessage.CLOSE)}},P),T(o.default,{variant:"cta","data-testid":"externalWorkflowContinueButton",onClick:function(){var e=(0,u.W6)("".concat(t).concat(p.ps.COMPLETE_PURCHASE_WEB,":").concat(p.ps.GET_STARTED),"".concat(p.ps.COMPLETE_PURCHASE_WEB).concat(p.ps.GET_STARTED));S(e),h(g.SystemMessage.CLOSE,{shouldTriggerLicenseCheck:!0,status:y.WorkflowStatus.ORDER_COMPLETE})}},_))))})),E=n(46829),I=n(55077),A=n(27261),P=n(71439);function _(){var e=(0,A.Z)(["\n  query UserSubscriptionChangePlanQuery($offerId: ID!, $subscriptionId: ID!) {\n    user {\n      id\n      userSubscription(subscriptionId: $subscriptionId) {\n        id\n        changePlanAllowed(offerId: $offerId)\n      }\n    }\n  }\n"]);return _=function(){return e},e}function b(){var e=(0,A.Z)(["\n  fragment IneligiblePurchaseOrderFragment on Order {\n    marketSegment\n    country\n    cart {\n      cartItems {\n        offerId\n        conflicts {\n          offerId\n          reasonCode\n          subscriptionId\n        }\n      }\n    }\n  }\n"]);return b=function(){return e},e}function U(){var e=(0,A.Z)(["\n  query getOfferForIneligiblePurchaseQuery($offerId: ID!, $country: String!) {\n    offer(id: $offerId, country: $country) {\n      ...IneligiblePurchaseOfferFragment\n    }\n  }\n  ","\n"]);return U=function(){return e},e}function O(){var e=(0,A.Z)(["\n  fragment IneligiblePurchaseOfferFragment on Offer {\n    id\n    commitment\n    term\n    productArrangement {\n      cloud\n    }\n    offerContent {\n      productName\n      productIconUrls\n    }\n  }\n"]);return O=function(){return e},e}var k=(0,P.gql)(O()),N=(0,P.gql)(U(),k),R=(0,P.gql)(b()),L=(0,P.gql)(_()),w=function(e,t,n){return e.query({query:N,variables:{offerId:t,country:n}}).then((function(e){return e.data.offer}))},D=n(62482),B=n(36623),F=n(26265),Z=n(809),M=n.n(Z),H=n(92447),x=n(38347),j=n(91229),W=n(85564),q=n.n(W),G=n(37244),K=n.n(G),V=n(99246),Y=n(61792),$=n(73728),z=n(4190),Q=n(62452),J=n(85686),X=r.createElement,ee=function(e){return X(E.ApolloConsumer,null,(function(t){return X(te,(0,j.Z)({client:t},e))}))},te=function(e){var t=e.client,n=e.openUrl,o=e.onFooterClicked,a=(0,x.Z)(e,["client","openUrl","onFooterClicked"]),i=(0,J.useLogger)(),u=(0,r.useContext)(v.StoreContext).getState(),c=(0,l.n$)(u),s=(0,v.useSelector)(B.NO),d=(0,Y.hP)(u),f=(0,Y.et)(u),m=null===f||void 0===f?void 0:f.userId,p=(0,z.useFeatureFlags)(V.R.UC_I2T_PES)[V.R.UC_I2T_PES],g=(0,Q.tD)(),C=g.redirect,h=g.cancelUrl,y=null!==n&&void 0!==n?n:C,T=(0,Q.Sd)(),S=t.readFragment({fragment:R,id:"Order:".concat(s),fragmentName:"IneligiblePurchaseOrderFragment"}),E=(0,r.useCallback)(function(){var e=(0,H.Z)(M().mark((function e(n,r){return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(t,n,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[t]),A=(0,r.useCallback)((function(e,n){return function(e,t,n,r){return e.query({query:L,variables:{offerId:t,subscriptionId:n},context:r,fetchPolicy:"network-only"}).then((function(e){var t=(e.data.user||{}).userSubscription;return null===t||void 0===t?void 0:t.changePlanAllowed})).catch((function(){return!1}))}(t,e,n,d?{headers:{authorization:d}}:{})}),[t,d]),P=(0,r.useCallback)(function(){var e=(0,H.Z)(M().mark((function e(n){var r,o;return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.getIndividualToTeamUpgradeOffers)(t,n,m,c);case 2:return r=e.sent,o=r.data,e.abrupt("return",{data:o});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t,c,m]),_=(0,r.useCallback)(function(){var e=(0,H.Z)(M().mark((function e(t){var n,r,o,a,u,l;return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.info("Checking whether user is eligible for I2T upgrade in case of duplicate purchase"),p){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,P(t);case 5:if(u=e.sent,l=u.data,!((null===l||void 0===l||null===(n=l.individualToTeamUpgradeOffers)||void 0===n||null===(r=n.activeOffersResult)||void 0===r?void 0:r.filter((function(e){var t,n;return null===e||void 0===e||null===(t=e.offer)||void 0===t||null===(n=t.tags)||void 0===n?void 0:n.includes("ACTIVE_SUBSCRIPTION_I2T_UPGRADEABLE")}))).length>0&&(null===l||void 0===l||null===(o=l.individualToTeamUpgradeOffers)||void 0===o||null===(a=o.upgradeOffersResult)||void 0===a?void 0:a.offers.length)>0)){e.next=11;break}return i.info("Eligible for i2t upgrade as part of duplicate purchase from A.com"),e.abrupt("return",!0);case 11:return e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[P,p,i]),b=function(e,t,n){var r,o=null===e||void 0===e||null===(r=e.productArrangement)||void 0===r?void 0:r.family,a=n.find((function(e){return(null===e||void 0===e?void 0:e.paFamily)===o}));return t.includes(null===a||void 0===a?void 0:a.id)},U=(0,r.useCallback)(function(){var e=(0,H.Z)(M().mark((function e(t){var n,r,o,a,u,l,s,d,f,m,p,g,v,C,h,y,E;return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(t);case 2:f=e.sent,m=f.data,p=null===m||void 0===m||null===(n=m.individualToTeamUpgradeOffers)||void 0===n?void 0:n.activeSubscriptions,g=null===m||void 0===m||null===(r=m.individualToTeamUpgradeOffers)||void 0===r||null===(o=r.activeOffersResult)||void 0===o?void 0:o.map((function(e){return{id:null===e||void 0===e?void 0:e.offer.id,paFamily:null===e||void 0===e?void 0:e.offer.productArrangement.family}})),v=null===m||void 0===m||null===(a=m.individualToTeamUpgradeOffers)||void 0===a||null===(u=a.upgradeOffersResult)||void 0===u?void 0:u.offers,C=null===S||void 0===S||null===(l=S.cart)||void 0===l||null===(s=l.cartItems)||void 0===s?void 0:s.map((function(e){var t;return null===e||void 0===e||null===(t=e.conflicts)||void 0===t?void 0:t.map((function(e){return e.offerId}))})),h=q()(C),y=null===v||void 0===v?void 0:v.map((function(e,t){var n=e.offer;if(t<p.length)return{id:n.id,q:b(n,h,g)?2:1}})).filter((function(e){return void 0!==e})),d={},(0,F.Z)(d,K().app.COUNTRY.name,t),(0,F.Z)(d,K().app.LANGUAGE.name,c),(0,F.Z)(d,K().app.CURRENT_SUBSCRIPTION_IDS.name,p),(0,F.Z)(d,K().app.ITEMS.name,y),E=d,i.info("Redirecting to i2t payment page as part of duplicate purchase from A.com"),T(E);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[P,T,c,S,i]),O=(0,z.useFeatureFlags)(V.R.UC_SWITCH_PLAN_URL_UPDATE)[V.R.UC_SWITCH_PLAN_URL_UPDATE],k=$.j$.IN_WEB;return X($.jO,(0,j.Z)({fetchOffer:E,fetchUserSubscriptionChangeOfferAllowed:A,fetchIndividualToTeamUpgradeAllowed:_,upgradeIndividualToTeam:U,locale:"zh-hant"===c?"zh_TW":c,switchPlanSurface:O?k:void 0,order:S,openUrl:y,onFooterClicked:o,cancelUrl:h},a))},ne=n(56),re=n(276),oe=r.createElement;function ae(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return ie(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ie(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}function ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ue=function(e){var t=e.children,n=(0,E.useApolloClient)(),o=(0,ne.TZ)(),a=(0,g.useCommerceAppContext)().isInApp,i=(0,Q.nV)(),u=(0,r.useState)(!1),l=u[0],c=u[1],s=(0,r.useState)(void 0),d=s[0],m=s[1],p=(0,re.useSelector)(B.NO),v=(0,r.useCallback)((function(){var e,t,r=n.readFragment({fragment:R,id:"Order:".concat(p),fragmentName:"IneligiblePurchaseOrderFragment"}),o=ae(null===r||void 0===r||null===(e=r.cart)||void 0===e?void 0:e.cartItems);try{for(o.s();!(t=o.n()).done;){var a,i=ae(t.value.conflicts);try{for(i.s();!(a=i.n()).done;){var u=a.value;if(u.reasonCode)return u.reasonCode}}catch(l){i.e(l)}finally{i.f()}}}catch(l){o.e(l)}finally{o.f()}}),[p,n]);function C(e){switch(e){case I.CartItemConflictReason.IneligibleSwitch:case I.CartItemConflictReason.IneligibleIncluded:case I.CartItemConflictReason.IneligibleDuplicateUpgrade:m(f.q.CHANGE_PLAN);break;default:m(void 0)}}return oe(r.Fragment,null,oe(ee,{openUrl:a()?function(e){C(v()),c(!0);var t=(0,D.AK)(e);i(t)}:void 0,onFooterClicked:a()?function(){C(void 0),c(!0)}:void 0,adobeLaunchAnalytics:o}),l?oe(S,{workflow:d}):t)}},93714:function(e,t,n){"use strict";n.d(t,{Z:function(){return U},h:function(){return k}});var r=n(67294),o=n(46829),a=n(54147),i=n(99615),u=n(37629),l=n(99246),c=n(47758),s=n(40705),d=n(61792),f=n(18983),m=n(6119),p=n(75509),g=n(56),v=n(25235),C=n(11051),h=n(34937),y=n(13164),T=n(4190),S=n(276),E=n(12510),I=n(49865),A=n(73113),P=r.createElement,_=function(e){return function(t){var n=(0,E.useStore)(),r=(0,y.T)(),f=(0,S.useSelector)(d.Ax),p=null===f||void 0===f?void 0:f.browser,I=(0,a.VB)(a.yr),_=(0,g.TZ)(),b=(0,C.useCommerceAppContext)().hostCtxId,U=(0,o.useApolloClient)(),O=(0,h.useContentEntry)(void 0,!0),k=(0,v.T)(),N=(0,T.useFeatureFlags)([l.R.UC_FORCE_ALL_APPS_OPTIMIZATION]);if((0,s.jO)(n.getState(),null===k||void 0===k?void 0:k.offer,N)){var R=O.get("productInfoBoxContentList");R&&(R.items[0].learnMoreLabel=R.items[0].newLearnMoreLabel)}var L=(0,A.withDialog)((function(e){var r=e.onClose,o=t.data,a=o.offerContent,i=o.productArrangementCode,u=o.productIconUrls;return P(m.l,{onClose:r,offerContent:a,productArrangementCode:i,productLogoUrls:u,commerceAppContext:b,errorBoundaryComponentName:"ProductInfoBox",store:n,apolloClient:U,adobeLaunchAnalytics:_,features:(0,c.h)()})}),{onClick:function(e){var t,n="product-info-learn-more"===(null===e||void 0===e||null===(t=e.dataset)||void 0===t?void 0:t.testid);return p===i.s.SAFARI&&I&&window.scroll(0,0),n&&r(u.P.LEARN_MORE_CLICK),n}})((function(n){var r=n.onClick,o=function(e){null===r||void 0===r||r(e.target)};return P("div",{role:"button",onKeyDown:function(e){13!==e.keyCode&&"Enter"!==e.key||(e.preventDefault(),o(e))},onClick:o},P(e,t))}));return P(L,null)}},b=_(p.Z9),U=(0,I.r)("productInfoCard",p.G6)(b),O=_(p.h8),k=(0,I.r)("productInfoBoxContent",p.qW)(O),N=(0,I.r)("languageWordOrder",f.LanguageWordOrderModel)((function(){return null})).queryCollection;U.queryCollection.merge(N)},46839:function(e,t,n){"use strict";n.d(t,{l:function(){return i}});var r=n(67294),o=n(83004),a=r.createElement,i=function(e){var t=e.title,n=e.subtitle;return a("div",{className:o.Z.stepHeader},a("div",{className:o.Z.stepHeaderTitle,"data-testid":"step-header-title","data-cs-mask":!0},t),n&&a("div",{className:o.Z.stepHeaderSubtitle},n))}},99615:function(e,t,n){"use strict";var r;n.d(t,{s:function(){return r}}),function(e){e.SAFARI="Safari"}(r||(r={}))},72301:function(e,t,n){"use strict";n.d(t,{G:function(){return ce}});var r=n(26265),o=n(37244),a=n.n(o),i=n(67294),u=n(79978),l=n(14834),c=n(56),s=n(56746),d=n(23996),f=n(34937),m=n(2385),p=n(90325),g=n(37629),v=n(52253),C=n(41681),h=n(99246),y=n(298),T=n(22965),S=n(11426),E=n(65455),I=n(62482),A=n(92488),P=n(94945),_=n(96029),b=n(61792),U=n(30137),O=n(8703),k=n(80827),N=n(96671),R=n(84248),L=n(93714),w=n(37478),D=n(52251),B=(0,f.defineContents)("SegmentationBackgroundImage",{imageUrl:{id:"imageUrl",type:D.wQ},family:{id:"family",type:"string"}}),F=(0,f.defineContents)("SegmentationHeader",{header:{id:"header",type:"string"},offerType:{id:"offerType",type:"string"},customerSegment:{id:"customerSegment",type:"string"},marketSegment:{id:"marketSegment",type:"string"},trialTermUnit:{id:"trialTermUnit",type:"string"},trialTerm:{id:"trialTerm",type:"string"}}),Z=(0,f.defineContents)("SegmentationPageContent",{pageTitle:{id:"pageTitle",type:F,isArray:!0,placeholderContent:[{header:"Let's get started - Your first day is free.",offerType:"TRIAL",trialTermUnit:"DAY",trialTerm:"1"},{header:"Let's get started - Your first {trialTermUnit} days are free.",offerType:"TRIAL",trialTermUnit:"DAY"},{header:"Let's get you {productName}.",offerType:"BASE"}]},buttonContinue:{id:"buttonContinue",type:"string",placeholderContent:"Continue"},segmentationBackgroundImages:{id:"segmentationBackgroundImages",type:B,isArray:!0,placeholderContent:[{family:"DEFAULT",imageUrl:{_publishUrl:"https://publish-p22655-e59433.adobeaemcloud.com/content/dam/checkout/images/segmentation/segmentation_right_side_background.png",_authorUrl:"https://author-p22655-e59433.adobeaemcloud.com/content/dam/checkout/images/segmentation/segmentation_right_side_background.png"}},{family:"PHOTOSHOP",imageUrl:{_publishUrl:"https://publish-p22655-e59433.adobeaemcloud.com/content/dam/checkout/images/segmentation/Photoshop.jpg",_authorUrl:"https://author-p22655-e59433.adobeaemcloud.com/content/dam/checkout/images/segmentation/Photoshop.jpg"}},{family:"PHOTOSHOP_LIGHTROOM",imageUrl:{_publishUrl:"https://publish-p22655-e59433.adobeaemcloud.com/content/dam/checkout/images/segmentation/Photography.jpg",_authorUrl:"https://author-p22655-e59433.adobeaemcloud.com/content/dam/checkout/images/segmentation/Photography.jpg"}},{family:"ILLUSTRATOR",imageUrl:{_publishUrl:"https://publish-p22655-e59433.adobeaemcloud.com/content/dam/checkout/images/segmentation/Illustrator.jpg",_authorUrl:"https://author-p22655-e59433.adobeaemcloud.com/content/dam/checkout/images/segmentation/Illustrator.jpg"}},{family:"CC_ALL_APPS",imageUrl:{_publishUrl:"https://publish-p22655-e59433.adobeaemcloud.com/content/dam/checkout/images/segmentation/CC_All_Apps.jpg",_authorUrl:"https://author-p22655-e59433.adobeaemcloud.com/content/dam/checkout/images/segmentation/CC_All_Apps.jpg"}}]}}),M=n(49865),H=(0,M.r)("segmentationSelectors",D.MP)(D.DV),x=n(36623),j=n(15257),W=n(46839),q=n(20660),G=n(11051),K=n(276),V=n(13164),Y=n(4190),$=n(61274),z=n(62452),Q=n(54147),J=n(46829),X=n(55988),ee=n(96909),te=n(5764),ne=n(12510),re=n(52007),oe=n(21346),ae=n(60718),ie=i.createElement;function ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ce=(0,M.r)("segmentationPage",Z)((function(){var e,t,n=(0,Y.useFeatureFlags)(h.R.UC_BTS_REDIRECT_UK)[h.R.UC_BTS_REDIRECT_UK],r=(0,z.eR)(k.NavigationType.SWITCH),o=(0,X.t)().currentRoute,D=(0,re.useTrackEvent)(),M=(0,K.useSelector)(E.dm),ue=M.teamAdminConsoleUrl,ce=M.teamCCPlansUrl,se=M.teamCCEduPlansUrl,de=M.teamDocumentPlansUrl,fe=M.desktopTrialDownloadUrl,me=(0,K.useSelector)(b.H0),pe=(0,f.useContentEntry)(Z),ge=(0,Q.VB)(),ve=(0,i.useState)(""),Ce=ve[0],he=ve[1],ye=(0,te.R_)(),Te=ye.goToNextStep,Se=ye.hasPreviousStep,Ee=(0,ne.useStore)().getState(),Ie=(0,K.useSelector)(E.mT),Ae=(0,K.useSelector)(E.n$),Pe=a().app,_e=Pe.PA_CODE,be=Pe.MARKET_SEGMENT,Ue=Pe.OFFER_TYPE,Oe=Pe.ORIGINAL_OFFER_ID,ke=Pe.CLIENT_ID,Ne=Pe.SVAR,Re=(0,G.useCommerceAppContext)().isInApp,Le=(0,z.nV)(),we=(0,z.nV)(C.ki.BUSINESS_TRIAL),De=(0,i.useState)(!1),Be=De[0],Fe=De[1],Ze=(0,K.useSelector)(_.vl),Me=Ze[_e.name],He=Ze[be.name],xe=Ze[Ue.name],je=Ze[ke.name],We=Ze[Ne.name],qe=(0,K.useSelector)(b.et).userId,Ge=(0,K.useSelector)(S.tT),Ke=(0,S.Nk)().clearBundleSourceOffer,Ve=(0,K.useDispatch)(),Ye=(0,K.useSelector)(E.S2),$e=(0,K.useSelector)(E.Im),ze=(0,ee.W)(),Qe=ze.showApplePay,Je=ze.showGooglePay,Xe=(0,$.d)(),et=(0,oe.z)(),tt=(0,Y.useFeatureFlags)(h.R.UC_USE_ANALYTICS_STATE_HOOK)[h.R.UC_USE_ANALYTICS_STATE_HOOK],nt=(0,Y.useFeatureFlags)([h.R.P_UC_USE_TEST_CAMPAIGNS])[h.R.P_UC_USE_TEST_CAMPAIGNS],rt=(0,Y.useFeatureFlags)([h.R.UC_M5])[h.R.UC_M5],ot=(0,J.useQuery)(T.j_,{variables:(0,T.WC)(Ie,Me,Ae,xe,qe,je,We,Xe,nt)}).data.segmentationOffers,at=(null===ot||void 0===ot||null===(e=ot.result)||void 0===e||null===(t=e[0])||void 0===t?void 0:t.offers)||[];if(n?!Ye&&"GB"!==Ie:!Ye){for(var it=JSON.parse(JSON.stringify(at)),ut=0;ut<it.length;ut++){var lt,ct=null===(lt=it[ut])||void 0===lt?void 0:lt.offer;if((null===ct||void 0===ct?void 0:ct.offerType)===R.R.TRIAL&&(null===ct||void 0===ct?void 0:ct.customerSegment)===m.op.Team){it[ut].offer.promotion.promotionTermValue=7;break}}at=JSON.parse(JSON.stringify(it))}var st=(0,p.V$)(Ze,at),dt=(0,i.useState)(st),ft=dt[0],mt=dt[1],pt=(0,i.useRef)({isDefaultSegmentSelected:!0});(0,i.useEffect)((function(){Ge&&Ke()}),[Ke,Ge]);var gt=(0,V.T)();(0,i.useEffect)((function(){if(ft){if(pt.current.isDefaultSegmentSelected){gt(g.P.PAGE_LOAD,{offers:at,selectedOfferId:ft});var e=(0,j.SQ)(at,ft,!0),t=e.offer,n=e.selectedPodEvent,r=e.flowTypeAttributes;if(tt){var a=(0,y.Nf)(t,r,Ee,v.RC.EVENT_STATE_TYPE,n,Ye,o,Qe,Je);et(a)}else(0,y.K8)(t,r,Ee,v.RC.EVENT_STATE_TYPE,n,Ye,void 0,Qe,Je)}else{gt(g.P.SEGMENT_SELECTED,{offers:at,selectedOfferId:ft});var i=(0,j.SQ)(at,ft,!1),u=i.offer,l=i.selectedPodEvent,c=i.flowTypeAttributes;if(tt){var s=(0,y.Nf)(u,c,Ee,v.RC.EVENT_LINK_TYPE,l,Ye,o);et(s)}else(0,y.K8)(u,c,Ee,v.RC.EVENT_LINK_TYPE,l,Ye)}pt.current.isDefaultSegmentSelected=!1}}),[ft]);function vt(){return at.find((function(e){return(null===e||void 0===e?void 0:e.offer.id)===ft}))}var Ct=function(e,t){var n;return null===(n=at.find((function(n){return(null===n||void 0===n?void 0:n.offer.customerSegment)===e&&(null===n||void 0===n?void 0:n.offer.marketSegments.includes(t))})))||void 0===n?void 0:n.offer};var ht=function(e,t){return function(e,t){return t===m.op.Individual&&e.includes(m.ii.Com)}(e,t)?"":Ce};var yt=function(e){if(!e)return null;var t,n,r=e.offerType===m.m_.Promotion,o=!!e.appliedPromotions;return r?e.marketSegments.includes(m.ii.Edu)?null===(t=e.marketSegmentAltPrice)||void 0===t||null===(n=t.offerPriceDisplay)||void 0===n?void 0:n.displayUnitPrice:e.offerPriceDisplay.displayBaseUnitPrice:o?e.offerPriceDisplay.displayBaseUnitPrice:void 0},Tt=function(e){return pe.search(B).find((function(t){return t.get(B.family)===String(e).toUpperCase()}))};return ie(i.Fragment,null,Be?ie(U.b,{workflow:me?O.q.TEAM_ADMIN:O.q.BUSINESS_TRIAL}):ie(ae.Ru,null,ie(ae.uN,null,!tt&&ie(c.PF,{route:o}),ie(W.l,{title:function(){var e,t,n=null===(e=vt())||void 0===e?void 0:e.offer,r=n||{},o=r.offerType,a=r.promotion,i=(0,P.p)(pe.get(Z.pageTitle),o,a);return F.createEntry(i).format(F.header,{trialTermUnit:null===a||void 0===a?void 0:a.promotionTermValue,productName:null===n||void 0===n||null===(t=n.offerContent)||void 0===t?void 0:t.productName})}()}),ie("div",{className:u.Z.segmentationContainer},ie(H,{defaultSelectionOfferId:ft,code:Me,marketSegment:He,segmentations:at,onSelect:function(e){return function(e){var t=null===e||void 0===e?void 0:e.id;mt(t),Ve((0,x.$C)(t)),he(null===e||void 0===e?void 0:e.title)}(e)}})),ie(l.s,{ctaLabel:pe.get(Z.buttonContinue),onCtaClick:function(){var e,t,o=(0,y.W6)("".concat(v.Fp.PAGE_SEGMENTATION,":").concat(v.ps.CONTINUE,":").concat(v.ps.CLICK),v.ps.CONTINUE);D(o);var a=null!==(e=null===(t=vt())||void 0===t?void 0:t.offer)&&void 0!==e?e:{},i=a.customerSegment,u=a.offerType;if(i===m.op.Team)!function(e){if(me)Re()?(Fe(!0),Le((0,I.AK)(ue))):r(ue);else if(e===R.R.TRIAL)if(rt||Ye||n&&"GB"===Ie){var t=(0,I.dy)(ft,Ie,Ae);Re()?(Fe(!0),we(t)):r(t)}else{var o=(0,A.getLocalizedURL)(fe,$e);r(o)}else{var a,i,u,l,c=(null===(a=vt())||void 0===a?void 0:a.offer)||{};u=(null===(i=c.productArrangement)||void 0===i?void 0:i.cloud)===d.e.DOCUMENT?de:null!==(l=c.marketSegments)&&void 0!==l&&l.includes(m.ii.Com)?ce:se,Re()?(Fe(!0),Le((0,I.AK)(u))):r(u)}}(u);else{var l,c=[{id:ft}],s=le(le({},Ze),{},{items:c});if(function(){var e,t=Ct(m.op.Individual,m.ii.Com),n=Ct(m.op.Individual,m.ii.Edu),r=null===(e=vt())||void 0===e?void 0:e.offer;return t&&n&&t.productArrangement.family!==n.productArrangement.family&&(null===r||void 0===r?void 0:r.marketSegments.includes(m.ii.Edu))}())s[Oe.name]=null===(l=Ct(m.op.Individual,m.ii.Com))||void 0===l?void 0:l.id;Te(s)}},showBackButton:Se()})),function(){var e,t=function(){var e,t,n,r=null===(e=vt())||void 0===e?void 0:e.offer,o=r||{},a=o.offerContent,i=o.marketSegments,u=o.customerSegment,l=o.offerPriceDisplay,c=o.productArrangementCode,s=o.term,d=o.offerType,f=o.promotion,g=o.currency,v=o.productArrangement,C=o.processingInstructions,h=a||{},y=h.productName,T=h.productDescription,S=h.productIconUrls,E=Ct(m.op.Individual,m.ii.Com),I=(null===E||void 0===E||null===(t=E.offerContent)||void 0===t?void 0:t.productName)||"",A=(null===E||void 0===E?void 0:E.productArrangementCode)||c,P=(0,p.QK)(l.priceDisplay),_={recurrenceTerm:N.g.Yearly===s?w.RecurrenceTerm.YEAR:w.RecurrenceTerm.MONTH,formatString:null===g||void 0===g?void 0:g.formatString,isTaxInclusive:P,taxTerm:(0,p.Mo)(null===r||void 0===r?void 0:r.offerPriceDisplay)},b={usePrecision:null===g||void 0===g?void 0:g.precision};null!==l&&void 0!==l&&l.displayUnitPrice&&(n={data:le({price:l.displayUnitPrice},_),options:b});var U={offerType:d,customerSegment:u,marketSegments:i,promotion:f,processingInstructions:C},O=yt(r);return le(le({productArrangementCode:c,productName:y,productDescription:T,subtitle:ht(i,u),productIconUrls:S,offerContent:a,offerType:d,promotion:f,startingPrice:n},O?{strikethroughPrice:{data:le({price:O},_),options:b}}:{}),{},{productArrangement:v,clarityTermsProps:U,includedProductName:I,includedProductArrangementCode:A})}(),n=null===t||void 0===t||null===(e=t.productArrangement)||void 0===e?void 0:e.family,r=ft?function(e){var t,n,r,o=Tt(e);return o?null===o||void 0===o||null===(t=o.get(B.imageUrl))||void 0===t?void 0:t._publishUrl:null===(n=Tt("DEFAULT"))||void 0===n||null===(r=n.get(B.imageUrl))||void 0===r?void 0:r._publishUrl}(n):"",o=ge?"Y":"X",a={entering:{opacity:0,transform:"translate".concat(o,"(").concat("30%",")")},entered:{opacity:1,transform:"translate".concat(o,"(0)")}};return ie(q.ZP,{appear:!0,in:!0,timeout:600},(function(e){return ie(s.AppErrorBoundary,{logMeta:{componentName:"Segmentation",errorLoadingComponent:"WizardLayoutDetailsPanel"}},ie(ae.Wh,{className:u.Z.segmentationDetailsPanel,style:le({opacity:0,transform:"translate".concat(o,"(").concat("30%",")"),transition:"all ".concat(600,"ms ease-in-out")},a[e])},ie("div",{className:u.Z.backgroundImageContainer,role:"img","data-testid":"productImage",style:{backgroundImage:"url(".concat(r||"",")")}}),ie("div",{className:u.Z.productCardContainer},ft&&ie(L.Z,{data:t}))))}))}()))})),se=ce.queryCollection;se.merge(ae.Ru.queryCollection),se.merge(L.Z.queryCollection),se.merge(H.queryCollection)},84054:function(e,t,n){"use strict";n.d(t,{vI:function(){return r.G},VQ:function(){return o.VQ},j_:function(){return o.j_},tH:function(){return o.tH},WC:function(){return o.WC}});var r=n(72301),o=n(22965)}}]);