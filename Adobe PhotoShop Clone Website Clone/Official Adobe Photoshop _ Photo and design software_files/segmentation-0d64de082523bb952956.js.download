(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4780],{67281:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return He}});var r=n(809),o=n.n(r),i=n(26265),a=n(92447),l=n(67294),u=n(37244),s=n.n(u),c=n(19291),d=n(99246),f=n(84054),m=n(65455),p=n(94797),v=n(49644),g=n(90325),S=n(58886),E=n(47565),T=n(96029),b=n(61792),O=n(57332),C="SegmentationChallenger__bundleSelector__3O4Tm",I=n(14834),_=n(7655),y=n(56746),h=n(82093),A=n(1025),N=n(23996),P=n(2385),R=n(37629),U=n(52253),k=n(41681),D=n(298),L=n(11426),w=n(62482),M=n(92488),j=n(34937),G=(0,j.defineContents)("SegmentationChallengerPageContentType",{pageTitle:{id:"pageTitle",type:"string",placeholderContent:"{ type, select,\n        DAY {Pick a plan - your first {trialTerm, plural, =1 {day is} other {# days are}} free.}\n        WEEK {Pick a plan - your first {trialTerm, plural, =1 {week is} other {# weeks are}} free.}\n        MONTH {Pick a plan - your first {trialTerm, plural, =1 {month is} other {# months are}} free.}\n        other {Pick a plan.}\n      }"},buttonContinue:{id:"buttonContinue",type:"string",placeholderContent:"Continue"},redirectingText:{id:"redirectingText",type:"string",placeholderContent:"Redirecting..."}});function V(e,t){var n,r,o=(null===e||void 0===e||null===(n=e.promotion)||void 0===n?void 0:n.promotionTerm)||"",i=(null===e||void 0===e||null===(r=e.promotion)||void 0===r?void 0:r.promotionTermValue)||0;return t.format(G.pageTitle,{type:o,trialTerm:i})}var B,F,x,Z=n(30137),q=n(8703),K=n(44596),H=n(70721),Q=n(80827),Y=n(84248),W="SegmentationTabs__tabsContainer__3gQG0",$=n(54147),J=n(32292);!function(e){e.COM="COM",e.EDU="EDU",e.GOV="GOV"}(B||(B={})),function(e){e.TEAM="TEAM",e.INDIVIDUAL="INDIVIDUAL",e.ENTERPRISE="ENTERPRISE"}(F||(F={})),function(e){e.DEFAULT="DEFAULT",e.PERPETUAL="PERPETUAL",e.TRIAL="TRIAL",e.BASE="BASE",e.PROMOTION="PROMOTION"}(x||(x={}));var X=(0,j.defineContents)("ImageContentType",{publishUrl:{id:"_publishUrl",type:"string"},authorUrl:{id:"_authorUrl",type:"string"}}),z=(0,j.defineContents)("SegmentationTab",{title:{id:"title",type:"string"},defaultIcon:{id:"defaultIcon",type:X},selectedIcon:{id:"selectedIcon",type:X},marketSegment:{id:"marketSegment",type:"string"},customerSegment:{id:"customerSegment",type:"string"},offerType:{id:"offerType",type:"string"}}),ee=(0,j.defineContents)("SegmentationTabs",{pickerLabel:{id:"pickerLabel",type:"string",placeholderContent:"Show me plans for:"},segmentations:{id:"segmentations",type:z,isArray:!0,placeholderContent:[{title:"Individuals",defaultIcon:{_publishUrl:"https://odin.adobe.com/content/dam/checkout/images/segmentation/segmentation-tabs/individuals-default.svg"},selectedIcon:{_publishUrl:"https://odin.adobe.com/content/dam/checkout/images/segmentation/segmentation-tabs/individuals-selected.svg"},customerSegment:F.INDIVIDUAL,marketSegment:B.COM},{title:"Students and teachers",defaultIcon:{_publishUrl:"https://odin.adobe.com/content/dam/checkout/images/segmentation/segmentation-tabs/students-and-teachers-default.svg"},selectedIcon:{_publishUrl:"https://odin.adobe.com/content/dam/checkout/images/segmentation/segmentation-tabs/students-and-teachers-selected.svg"},customerSegment:F.INDIVIDUAL,marketSegment:B.EDU},{title:"Business",defaultIcon:{_publishUrl:"https://odin.adobe.com/content/dam/checkout/images/segmentation/segmentation-tabs/teams-default.svg"},selectedIcon:{_publishUrl:"https://odin.adobe.com/content/dam/checkout/images/segmentation/segmentation-tabs/teams-selected.svg"},customerSegment:F.TEAM,marketSegment:B.COM},{title:"Schools and universities",defaultIcon:{_publishUrl:"https://odin.adobe.com/content/dam/checkout/images/segmentation/segmentation-tabs/schools-and-universities-default.svg"},selectedIcon:{_publishUrl:"https://odin.adobe.com/content/dam/checkout/images/segmentation/segmentation-tabs/schools-and-universities-selected.svg"},customerSegment:F.TEAM,marketSegment:B.EDU}]}}),te=n(11168),ne=n(71263),re=n(17182),oe="SegmentationTab__tabContainer__1dnov",ie="SegmentationTab__tabIcon__2tUg2",ae="SegmentationTab__tabLabel__1VAlC",le=l.createElement,ue=function(e){var t=e.id,n=e.isSelected,r=e.label,o=e.defaultIcon,i=e.selectedIcon;return le("div",{className:oe,"data-testid":"segmentation-tab-item-".concat(t)},function(e,t,n){return le("div",{className:ie},e?n:t)}(n,o,i),le("span",{className:ae,"data-testid":"segmentation-tab-label"},r))},se=n(52007),ce=n(49865),de=l.createElement;function fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function me(e,t){var n=e._publishUrl;return de("img",{src:n,role:"presentation",alt:"","aria-labelledby":t})}var pe=(0,ce.r)("segmentationTabs",ee)((function(e){var t=e.onSelect,n=e.segmentations,r=e.selectedTabId,o=(0,$.VB)($.yr),a=(0,j.useContentEntry)(ee),u=a.get(ee.pickerLabel),s=(0,se.useTrackEvent)(),c=function(e,t){var n=e.get("segmentations");return Array.isArray(n)&&t.map((function(e){var t=e||{},r=t.id,o=t.customerSegment,i=t.marketSegments,a=t.offerType,l=i||[""],u=(0,J.Z)(l,1)[0],s=n.find((function(e){return e.marketSegment===u&&e.customerSegment===o&&(!e.offerType||e.offerType===a)}))||{},c=s.title,d=void 0===c?"":c,f=s.defaultIcon,m=void 0===f?"":f,p=s.selectedIcon;return{id:r,title:d,defaultIcon:m,selectedIcon:void 0===p?"":p,customerSegment:o,marketSegment:u,offerType:a}}))}(a,(0,l.useMemo)((function(){return n.map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.offer)}))}),[n])),d=function(e){var n=c.find((function(t){return t.id===e})),o=n.customerSegment,i=n.marketSegment;n.id!==r&&f(o,i),t&&t(e)},f=function(e,t){var n;n=e===P.op.Individual?t===P.ii.Com?U.ps.SEGMENTATION_TAB_INDIVIDUAL:U.ps.SEGMENTATION_TAB_STUDENTS_TEACHERS:t===P.ii.Edu?U.ps.SEGMENTATION_TAB_SCHOOL_UNIVERSITY:U.ps.SEGMENTATION_TAB_TEAM;var r="".concat(n,":").concat(U.ps.SEGMENTATION_TAB_CLICK),o="".concat(n).concat(U.ps.SEGMENTATION_TAB),i=(0,D.W6)(r,o);s(i)};return de("div",{className:W,"data-testid":"segmentation-tabs-container"},o?de(te.cW,{isQuiet:!0,onSelectionChange:d,selectedKey:r,"data-testid":"segmentation-picker","aria-label":"Show me plans for",label:u},c.map((function(e){var t=e||{},n=t.id,r=t.title;return de(ne.ck,{key:n},r)}))):de(re.mQ,{selectedKey:r,onSelectionChange:d,"data-testid":"segmentation-tabs","aria-label":"Show me plans for"},de(re.td,null,c.map((function(e){var t=e||{},n=t.id,o=t.title,i=t.defaultIcon,a=t.selectedIcon;return de(ne.ck,{key:n},de(ue,{id:n,isSelected:r===n,label:o,defaultIcon:me(i,o),selectedIcon:me(a,o)}))})))))})),ve=n(36623),ge=n(15257),Se=n(46839),Ee=n(69047),Te=n(11051),be=n(276),Oe=n(13164),Ce=n(4190),Ie=n(61274),_e=n(62452),ye=n(46829),he=n(96909),Ae=n(5764),Ne=n(12510),Pe=n(21346),Re=n(60718),Ue=l.createElement;function ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function De(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ke(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ke(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Le=(0,ce.r)("segmentationChallengerPage",G)((function(){var e,t,n,r=(0,j.useContentEntry)(G),o=(0,Ae.R_)(),a=o.goToNextStep,u=o.hasPreviousStep,c=(0,_e.eR)(Q.NavigationType.EXTERNAL),p=(0,_e.nV)(),v=(0,_e.nV)(k.ki.BUSINESS_TRIAL),S=(0,be.useDispatch)(),E=(0,Ne.useStore)().getState(),O=(0,be.useSelector)(m.mT),B=(0,be.useSelector)(m.Im),F=(0,be.useSelector)(b.H0),x=(0,be.useSelector)(m.n$),W=(0,be.useSelector)(b.et).userId,$=(0,be.useSelector)(T.vl),J=s().app,X=J.PA_CODE,z=J.OFFER_TYPE,ee=J.ORIGINAL_OFFER_ID,te=J.CLIENT_ID,ne=J.SVAR,re=J.ITEMS,oe=$[X.name],ie=$[z.name],ae=$[te.name],le=$[ne.name],ue=(0,L.Nk)(),ce=ue.setBundleSourceOffer,de=ue.setIsBundleOfferSelected,fe=(0,be.useSelector)(L.tT),me=(0,be.useSelector)(m.S2),ke=(0,he.W)(),Le=ke.showApplePay,we=ke.showGooglePay,Me=(0,l.useState)(!1),je=Me[0],Ge=Me[1],Ve=(0,l.useState)(!1),Be=Ve[0],Fe=Ve[1],xe=(0,l.useState)(!1),Ze=xe[0],qe=xe[1],Ke=(0,Te.useCommerceAppContext)().isInApp,He=(0,be.useSelector)(m.dm),Qe=He.teamAdminConsoleUrl,Ye=He.teamCCPlansUrl,We=He.teamCCEduPlansUrl,$e=He.teamDocumentPlansUrl,Je=He.desktopTrialDownloadUrl,Xe=(0,Ce.useFeatureFlags)([d.R.UC_M5])[d.R.UC_M5],ze=(0,Ie.d)(),et=(0,Pe.z)(),tt=(0,se.useTrackEvent)(),nt=U.ps.PLAN_PICK_ROUTE,rt=(0,Ce.useFeatureFlags)([d.R.P_UC_USE_TEST_CAMPAIGNS])[d.R.P_UC_USE_TEST_CAMPAIGNS],ot=(0,ye.useQuery)(f.VQ,{variables:(0,f.tH)(O,oe,x,ie,W,ae,le,ze,rt)}),it=ot.error,at=ot.loading,lt=ot.data.segmentationBundleOffers,ut=lt.map((function(e){return e.segmentationOffer}))||[],st=(0,Ce.useFeatureFlags)(d.R.UC_BTS_REDIRECT_UK)[d.R.UC_BTS_REDIRECT_UK];if(st?!me&&"GB"!==O:!me){for(var ct=JSON.parse(JSON.stringify(ut)),dt=0;dt<ct.length;dt++){var ft,mt=null===(ft=ct[dt])||void 0===ft?void 0:ft.offer;if((null===mt||void 0===mt?void 0:mt.offerType)===Y.R.TRIAL&&(null===mt||void 0===mt?void 0:mt.customerSegment)===P.op.Team){ct[dt].offer.promotion.promotionTermValue=7;break}}ut=JSON.parse(JSON.stringify(ct))}var pt=(0,g.V$)($,ut),vt=(0,l.useState)(pt),gt=vt[0],St=vt[1],Et=(0,Oe.T)(),Tt=lt.reduce((function(e,t){var n,r=null===t||void 0===t||null===(n=t.segmentationOffer)||void 0===n?void 0:n.offer;return(null===r||void 0===r?void 0:r.id)===gt&&r.customerSegment===P.op.Individual&&r.marketSegments.includes(P.ii.Com)&&0===(e=t.bundleOffers.map((function(e){return e.offer}))).length?[t.segmentationOffer.offer]:e}),[]),bt=(0,be.useSelector)(T.yq),Ot=Tt.filter((function(e){return e.id===(null===bt||void 0===bt?void 0:bt[0])})).length>0,Ct=Ot&&null!==(e=null===bt||void 0===bt?void 0:bt[0])&&void 0!==e?e:pt,It=(0,l.useState)(Ct),_t=It[0],yt=It[1],ht=$[re.name]&&Ot?$:De(De({},$),{},(0,i.Z)({},re.name,[{id:pt}])),At=(0,l.useState)(ht),Nt=At[0],Pt=At[1],Rt={offers:Tt,selectedOfferId:_t};(0,l.useEffect)((function(){var e=(null===bt||void 0===bt?void 0:bt[0])||Ct;if(!it&&!at&&Rt.offers.length>0&&!fe){var t,n=Rt.offers.find((function(t){return(null===t||void 0===t?void 0:t.id)===e}));ce(e,null===n||void 0===n||null===(t=n.offerContent)||void 0===t?void 0:t.productName)}}),[Rt.offers.length,bt,fe,Rt.offers,ce,it,at,Ct]);var Ut=(0,l.useRef)({isDefaultSegmentSelected:!0}),kt=(0,l.useRef)({isDefaultSelected:!0});(0,l.useEffect)((function(){if(gt){if(Ut.current.isDefaultSegmentSelected){Et(R.P.PAGE_LOAD,{offers:ut,selectedOfferId:gt});var e=(0,ge.SQ)(ut,gt,!0),t=e.offer,n=e.selectedPodEvent,r=e.flowTypeAttributes,o=(0,D.Nf)(t,r,E,U.RC.EVENT_STATE_TYPE,n,me,nt,Le,we);et(o)}else{Et(R.P.SEGMENT_SELECTED,{offers:ut,selectedOfferId:gt});var i=(0,ge.SQ)(ut,gt,!1),a=i.offer,l=i.selectedPodEvent,u=i.flowTypeAttributes,s=(0,D.Nf)(a,u,E,U.RC.EVENT_LINK_TYPE,l,me,nt);et(s)}Ut.current.isDefaultSegmentSelected=!1}}),[gt]);var Dt=null===Tt||void 0===Tt?void 0:Tt.reduce((function(e,t,n){var r,o=null===t||void 0===t?void 0:t.offerContent,a=null===o||void 0===o?void 0:o.productName,l=n+1;return{content:De(De({},e.content),{},(0,i.Z)({},l,o)),productArrangementCodes:De(De({},e.productArrangementCodes),{},(0,i.Z)({},l,t.productArrangementCode)),productLogoUrls:De(De({},e.productLogoUrls),{},(0,i.Z)({},l,o.productIconUrls)),descriptionVariables:De(De({},e.descriptionVariables),{},(r={},(0,i.Z)(r,"product".concat(n+1),a),(0,i.Z)(r,"totalNumberOfBundleOffers",l),r))}}),{}),Lt=(0,j.useContentEntry)(void 0,!0);!function(){if((0,K.$D)(Tt)){var e=Lt.get("bundleContentList"),t=Lt.get("bestValueList");if(t&&e){var n=e.items[0].bestValue,r=t.items[0];n.label=r.label,n.variant=r.variant}}}();var wt=null===Tt||void 0===Tt?void 0:Tt.find((function(e){return(null===e||void 0===e?void 0:e.id)===_t})),Mt=null===wt||void 0===wt?void 0:wt.offerContent,jt=null===wt||void 0===wt||null===(t=wt.productArrangement)||void 0===t?void 0:t.cloud,Gt=Y.R[null===wt||void 0===wt?void 0:wt.offerType],Vt=null===wt||void 0===wt?void 0:wt.productArrangementCode,Bt=null===wt||void 0===wt||null===(n=wt.offerContent)||void 0===n?void 0:n.productIconUrls;function Ft(e){var t=$[s().app.ITEMS.name],n=Object.assign({},null===t||void 0===t?void 0:t[0]);n&&(n.id=e);var r=De(De({},$),{},(0,i.Z)({},s().app.ITEMS.name,[n]));yt(e),Pt(r),function(e){var t=(0,ge.xy)(Rt.offers,e,kt.current.isDefaultSelected),n=t.offer,r=t.selectedPodEvent,o=t.flowTypeAttributes,i=(0,D.Nf)(n,o,E,kt.current.isDefaultSelected?U.RC.EVENT_STATE_TYPE:U.RC.EVENT_LINK_TYPE,r,void 0,nt,Le,we);et(i),kt.current.isDefaultSelected=!1}(e)}function xt(e){return ut.find((function(t){return(null===t||void 0===t?void 0:t.offer.id)===e}))}function Zt(){var e;qt()&&(Nt[ee.name]=null===(e=Kt(P.op.Individual,P.ii.Com))||void 0===e?void 0:e.id);de(fe!==_t);var t=(0,D.W6)("".concat(U.ps.PLAN_PICK_ROUTE,":").concat(U.ps.CONTINUE,":").concat(U.ps.CLICK),U.ps.CONTINUE);tt(t),a(Nt)}(0,l.useEffect)((function(){Be&&Zt(),Fe(!1)}),[Be]);var qt=function(){var e=Kt(P.op.Individual,P.ii.Com),t=Kt(P.op.Individual,P.ii.Edu);return e&&t&&e.productArrangement.family!==t.productArrangement.family&&t.id===_t},Kt=function(e,t){var n;return null===(n=ut.find((function(n){return(null===n||void 0===n?void 0:n.offer.customerSegment)===e&&(null===n||void 0===n?void 0:n.offer.marketSegments.includes(t))})))||void 0===n?void 0:n.offer};return Ue(l.Fragment,null,Ze?Ue(Z.b,{workflow:F?q.q.TEAM_ADMIN:q.q.BUSINESS_TRIAL}):Ue(Re.Ru,null,Ue(Re.uN,null,Ue(y.AppErrorBoundary,{logMeta:{componentName:"Bundle",errorLoadingComponent:"StepHeader"}},Ue(Se.l,{title:V(wt,r)})),Ue(pe,{onSelect:function(e){var t,n;St(e),yt(e),S((0,ve.$C)(e));var r=null!==(t=null===(n=xt(e))||void 0===n?void 0:n.offer)&&void 0!==t?t:{},o=r.customerSegment,i=r.marketSegments,a=r.offerType;o===P.op.Individual&&i.includes(P.ii.Edu)&&(Ft(e),Fe(!0)),o===P.op.Team&&(Ge(!0),setTimeout((function(){yt(Ct),St(pt),Ge(!1)}),10),setTimeout((function(){!function(e,t){if(F)Ke()?(qe(!0),p((0,w.AK)(Qe))):c(Qe);else if(e===Y.R.TRIAL)if(Xe||me||st&&"GB"===O){var n=(0,w.dy)(t,O,x);Ke()?(qe(!0),v(n)):c(n)}else{var r=(0,M.getLocalizedURL)(Je,B);c(r)}else{var o,i,a,l,u=(null===(o=xt(t))||void 0===o?void 0:o.offer)||{};a=(null===(i=u.productArrangement)||void 0===i?void 0:i.cloud)===N.e.DOCUMENT?$e:null!==(l=u.marketSegments)&&void 0!==l&&l.includes(P.ii.Com)?Ye:We,Ke()?(qe(!0),p((0,w.AK)(a))):c(a)}}(a,e)}),15))},code:oe,segmentations:ut,selectedTabId:gt}),Tt.length>0?Ue("div",{className:C},Dt&&Ue(h.$G,{bundleDescriptionVariables:Dt.descriptionVariables,locale:x,offerContents:Dt.content,productArrangementCodes:Dt.productArrangementCodes,productLogoUrls:Dt.productLogoUrls}),wt&&Ue(Ee.o,{offer:wt}),Ue(h.O0,{onSelectionChange:Ft,bundleData:Rt})):je&&Ue(H.a,{message:r.get(G.redirectingText),showRedirect:!0}),Tt.length>0&&Ue(I.s,{ctaLabel:r.get(G.buttonContinue),onCtaClick:Zt,showBackButton:u()})),Ue(Re.Wh,null,Ue(y.AppErrorBoundary,{logMeta:{componentName:"SegmentationChallenger",errorLoadingComponent:"AllPlansInclude"}},Ue(_.R,{cloud:jt,offerType:Gt,offerContent:Mt,productArrangementCode:Vt,productLogoUrls:Bt})),Ue(y.AppErrorBoundary,{logMeta:{componentName:"Segmentation",errorLoadingComponent:"ClarityTerms"}},Ue(A.J,{offer:wt})))))})),we=Le.queryCollection;we.merge(_.R.queryCollection),we.merge(h.$G.queryCollection),we.merge(Ee.o.queryCollection),we.merge(h.sH.queryCollection),we.merge(A.J.queryCollection),we.merge(pe.queryCollection);var Me=n(72301),je=n(46576),Ge=n(40102),Ve=l.createElement;function Be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Be(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var xe=function(){var e=(0,Ne.useStore)(),t=(0,Ce.useFeatureFlags)([d.R.UC_FORCE_SEGMENTATION_CHALLENGER]),n=e.getShouldRenderSegmentationChallenger(t);return(0,je.Vk)(),Ve(n?Le:f.vI,null)},Ze=function(){var e=(0,a.Z)(o().mark((function e(t){var n,r,a,l,u,C,I,_,y,h,A,N,P,R,U,k,D,L,w,M,j,G,V,B,F,x,Z;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C=t.apolloClient,I=t.features,_=t.res,y=t.store,h=t.logger,A=y.getState(),N=(0,m.mT)(A),P=(0,m.n$)(A),R=(0,T.vl)(A)[s().app.PA_CODE.name],U=(0,T.vl)(A)[s().app.OFFER_TYPE.name],k=null===(n=(0,b.et)(A))||void 0===n?void 0:n.userId,D=(0,T.vl)(A)[s().app.CLIENT_ID.name],L=(0,T.vl)(A)[s().app.SVAR.name],w=(0,E.j)(A,I.includes(d.R.UC_FLEXIBLE_PROMOTIONS)),null===_||void 0===_||!_.writableEnded){e.next=12;break}return e.abrupt("return");case 12:return e.next=14,(0,S.C)(A,t.logger);case 14:return M=e.sent,(0,c._H)(M,null===(r=t.req)||void 0===r||null===(a=r.headers)||void 0===a?void 0:a.cookie),e.next=18,C.query({query:f.VQ,variables:(0,f.tH)(N,R,P,U,k,D,L,w,I.includes(d.R.P_UC_USE_TEST_CAMPAIGNS)),context:Fe({},M)});case 18:if(j=e.sent,A=y.getState(),null===j||void 0===j||!j.errors){e.next=25;break}if(G={currentRoute:O.Z.SEGMENTATION},!(V=(0,p.S2)(j.errors,C,y,G))){e.next=25;break}return e.abrupt("return",{error:V});case 25:if(null!==(B=null===j||void 0===j||null===(l=j.data)||void 0===l?void 0:l.segmentationBundleOffers)&&void 0!==B&&B.length){e.next=28;break}throw(0,v.n)();case 28:return h.info((0,g.qj)(B),"Segmentation Bundle Offers Response"),F=(0,g.IG)(null===(u=B[0].segmentationOffer)||void 0===u?void 0:u.offer),y.dispatch((0,ve.fC)(F)),x=B[0].id,Z=Fe(Fe({},(0,T.vl)(A)),{},(0,i.Z)({},s().app.ITEMS.name,[{id:x}])),(0,Ae.OK)(t,O.Z.SEGMENTATION,{features:I,newQueryParams:Z}),e.abrupt("return",{segmentationOfferId:x});case 35:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function qe(e,t){e.info((0,g.W1)(t),"Segmentation Offers Response")}xe.getInitialProps=function(){var e=(0,a.Z)(o().mark((function e(t){var n,r,a,l,u,p,g,C,I,_,y,h,A,N,P,R,U,k,D,L,w,M,j,G,V,B,F,x;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_=t.apolloClient,y=t.features,h=t.res,A=t.store,N=t.logger,!A.getShouldRenderSegmentationChallenger((0,i.Z)({},d.R.UC_FORCE_SEGMENTATION_CHALLENGER,null===y||void 0===y?void 0:y.includes(d.R.UC_FORCE_SEGMENTATION_CHALLENGER)))){e.next=4;break}return e.abrupt("return",Ze(t));case 4:return P=A.getState(),R=(0,m.mT)(P),U=(0,m.n$)(P),k=(0,T.vl)(P)[s().app.PA_CODE.name],D=(0,T.vl)(P)[s().app.OFFER_TYPE.name],L=null===(n=(0,b.et)(P))||void 0===n?void 0:n.userId,w=(0,T.vl)(P)[s().app.CLIENT_ID.name],M=(0,T.vl)(P)[s().app.SVAR.name],j=(0,E.j)(P,y.includes(d.R.UC_FLEXIBLE_PROMOTIONS)),e.next=15,(0,S.C)(P,t.logger);case 15:if(G=e.sent,null===h||void 0===h||!h.writableEnded){e.next=18;break}return e.abrupt("return");case 18:return(0,c._H)(G,null===(r=t.req)||void 0===r||null===(a=r.headers)||void 0===a?void 0:a.cookie),e.next=21,_.query({query:f.j_,variables:(0,f.WC)(R,k,U,D,L,w,M,j,null===y||void 0===y?void 0:y.includes(d.R.P_UC_USE_TEST_CAMPAIGNS)),context:Fe({},G)});case 21:if(V=e.sent,P=A.getState(),null!==(B=null===V||void 0===V||null===(l=V.data)||void 0===l||null===(u=l.segmentationOffers)||void 0===u||null===(p=u.result[0])||void 0===p?void 0:p.offers)&&void 0!==B&&B.length){e.next=26;break}throw(0,v.n)();case 26:return qe(N,null===V||void 0===V||null===(g=V.data)||void 0===g?void 0:g.segmentationOffers),F=null===(C=B[0])||void 0===C||null===(I=C.offer)||void 0===I?void 0:I.id,x=Fe(Fe({},(0,T.vl)(P)),{},(0,i.Z)({},s().app.ITEMS.name,[{id:F}])),(0,Ae.OK)(t,O.Z.SEGMENTATION,{features:y,newQueryParams:x}),e.abrupt("return",{segmentationOfferId:F});case 31:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var Ke=Me.G.queryCollection;Ke.merge(Le.queryCollection);var He=(0,Ge.O)(Ke,O.Z.SEGMENTATION)(xe)},17775:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/segmentation",function(){return n(67281)}])}},function(e){e.O(0,[9774,7949,9022,532,5582,809,4741,3433,7646,8078,615,1993,1721,8726,5101,8285,2328,4088,6168,898,9174,5110,3728,3536,993,2482,3044,8371,2719,4054,5583],(function(){return t=17775,e(e.s=t);var t}));var t=e.O();_N_E=t}]);